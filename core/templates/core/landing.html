{% extends "base.html" %}
{% load static %}
{% block content %}
<div class="landing-page">
    <!-- О нас -->
    <section id="about" class="py-5">
        <div class="row align-items-center">
            <div class="col-md-6">
                <h2 class="mb-4">О нас</h2>
                <p class="lead">Добро пожаловать в "Арбуз" - место, где стрижка становится искусством!</p>
                <p>Уже {{ years_on_market }} лет мы создаём неповторимые образы и дарим уверенность нашим клиентам. 
                   Секрет нашего успеха прост: лучшие мастера, индивидуальный подход и постоянное развитие.</p>
                <div class="mt-4">
                    <div class="d-flex align-items-center mb-3">
                        <i class="bi bi-check-circle-fill text-warning me-2"></i>
                        <span>Профессиональные мастера с опытом от 5 лет</span>
                    </div>
                    <div class="d-flex align-items-center mb-3">
                        <i class="bi bi-check-circle-fill text-warning me-2"></i>
                        <span>Современное оборудование и косметика</span>
                    </div>
                    <div class="d-flex align-items-center">
                        <i class="bi bi-check-circle-fill text-warning me-2"></i>
                        <span>Уютная атмосфера и отличный кофе</span>
                    </div>
                </div>
            </div>
            <div class="col-md-6">
                <img src="{% static 'images/barber.webp' %}" alt="О нас" class="img-fluid rounded shadow mt-4">
            </div>
        </div>
    </section>

    <!-- Услуги -->
    <section id="services" class="py-5 bg-light">
        <h2 class="text-center mb-5">Наши услуги</h2>
        <div class="row row-cols-1 row-cols-md-3 g-4">
            {% for service in services %}
            <div class="col">
                <div class="card h-100 border-0 shadow-sm">
                    <div class="card-body">
                        <h5 class="card-title">{{ service }}</h5>
                        <p class="card-text text-muted">
                            Доверьтесь нашим мастерам и получите безупречный результат!
                        </p>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
    </section>

    <!-- Мастера -->
<section id="masters" class="py-5">
    <h2 class="text-center mb-5">Наши мастера</h2>
    <div class="row row-cols-1 row-cols-md-3 g-4">
        {% for master in masters %}
        <div class="col">
            <div class="card h-100 border-0 shadow-sm">
                <div class="card-body text-center">
                    {% if master.photo %}
                    <div class="rounded-circle overflow-hidden mb-3 mx-auto" style="width: 150px; height: 150px;">
                        <img src="{{ master.photo.url }}" alt="{{ master.first_name }} {{ master.last_name }}" 
                             class="img-fluid w-100 h-100 object-fit-cover">
                    </div>
                    {% endif %}
                    <h5 class="card-title">{{ master.first_name }} {{ master.last_name }}</h5>
                    <p class="card-text">Мастер с опытом {{ master.experience }} лет</p>
                    <div class="small text-muted mt-2">
                        <p class="mb-1">Специализация:</p>
                        <ul class="list-unstyled">
                            {% for service in master.services.all|slice:":3" %}
                                <li><i class="bi bi-scissors me-1"></i> {{ service }}</li>
                            {% endfor %}
                            {% if master.services.count > 3 %}
                                <li><i class="bi bi-three-dots"></i> и другие услуги</li>
                            {% endif %}
                        </ul>
                    </div>
                </div>
            </div>
        </div>
        {% endfor %}
    </div>
</section>

<!-- Отзывы -->
<section id="reviews" class="py-5 bg-light">
    <h2 class="text-center mb-5">Отзывы наших клиентов</h2>
    <div class="row">
        {% if reviews %}
            {% for review in reviews %}
            <div class="col-md-4 mb-4">
                <div class="card h-100 border-0 shadow-sm">
                    <div class="card-body">
                        <div class="d-flex justify-content-between align-items-center mb-3">
                            <h5 class="card-title mb-0">{{ review.client_name }}</h5>
                            <div>
                                {% for i in "12345"|make_list %}
                                    {% if forloop.counter <= review.rating %}
                                        <i class="bi bi-star-fill text-warning"></i>
                                    {% else %}
                                        <i class="bi bi-star text-warning"></i>
                                    {% endif %}
                                {% endfor %}
                            </div>
                        </div>
                        <p class="card-text">{{ review.text }}</p>
                        <p class="card-text text-muted">
    <small>Мастер: <span class="fw-bold">{{ review.master }}</span></small></p>
                        <p class="card-text">
                            <small class="text-muted">{{ review.date_created|date:"d.m.Y" }}</small>
                        </p>
                    </div>
                </div>
            </div>
            {% endfor %}
        {% else %}
            <div class="col-12 text-center">
                <p>Пока нет отзывов. Будьте первым, кто оставит отзыв о нашей работе!</p>
            </div>
        {% endif %}
    </div>
</section>

    <!-- Запись -->
    <section id="booking" class="py-5 bg-dark text-center text-light">
        <h2 class="mb-4">Готовы преобразиться?</h2>
        <p class="lead mb-4">Запишитесь на приём прямо сейчас и получите скидку 10% на первое посещение!</p>
        <button class="btn btn-warning btn-lg">
            <i class="bi bi-calendar-check me-2"></i>
            Записаться
        </button>
    </section>
</div>
{% endblock content %}